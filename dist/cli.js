#!/usr/bin/env node
"use strict";var b=Object.create;var c=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var h=Object.getPrototypeOf,w=Object.prototype.hasOwnProperty;var l=(s,e)=>c(s,"name",{value:e,configurable:!0});var k=(s,e,r,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of u(e))!w.call(s,i)&&i!==r&&c(s,i,{get:()=>e[i],enumerable:!(t=y(e,i))||t.enumerable});return s};var v=(s,e,r)=>(r=s!=null?b(h(s)):{},k(e||!s||!s.__esModule?c(r,"default",{value:s,enumerable:!0}):r,s));var m=v(require("yargs")),g=require("yargs/helpers");var a="1.2.0";var n=require("@povio/scaffold");var o=require("colorette");var d=l((s,e,r)=>{switch(s){case"configure":break;case"register":console.log((0,o.blue)(s),(0,o.cyan)(e.id),`${"description"in e&&e?.description||""}`);break;case"status":switch(r){case"queued":case"executed":console.log((0,o.blue)(r),(0,o.cyan)(e.id));break;default:break}break;case"message":console.log((0,o.blue)(s),(0,o.cyan)(e.id),`[${r.type}] ${r.message}`),r.error&&console.error(r.error);break;default:console.log((0,o.blue)(s),(0,o.cyan)(e.id),r??"");break}},"scaffoldingLogger");var f={command:"apply",describe:"apply scaffolding",builder:{cwd:{describe:"Root directory of the project",demandOption:!0,type:"string",default:process.cwd()},verbose:{describe:"Verbose output",type:"boolean",default:!1},yes:{describe:"Auto-apply",type:"boolean",default:!1}},handler:async s=>{try{let e=s.cwd,r=s.verbose,t=new n.Handler(e,d);for await(let i of(0,n.findScaffoldFiles)({cwd:e}))t.register(i);await t.init(),t.status!=="error"?await t.exec():console.error("Error during init")}catch(e){console.error(e),process.exit(1)}}};(0,m.default)((0,g.hideBin)(process.argv)).version(a).scriptName("scaffold").command(f).help().demandCommand(1).strictCommands(!0).showHelpOnFail(!0).fail((s,e)=>{s&&console.log(s),e&&console.error(e),console.log("Use '--help' for more info"),process.exit(1)}).parse();
